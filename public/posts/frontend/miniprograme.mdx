---
title: 小程序与公众号开发流程
date: 2023-01-12 16:54:01
---

#### 小程序登录流程
1. 小程序是通过 wx.login 获取的 code, 然后通过 code 与后台服务器交互 
2. 后台服务器通过 appId + appSecret + code 获取 openID(同一个小程序同一个用户获取的openID不变)
3. appId与appSecret都是在小程序注册时生成在微信公众平台的后台管理系统中获取，后台可以写死
以上好处是appId与appSecret不会在前端丢失，会更安全

#### 小程序webview引用jsSDK注意事项
1. 小程序的webView 仅支持部分jssdk
2. 页面如果只用到跳转类接口如wx.miniProgram.navigateBack()，可以不配置jssdk，如果用到chooseImage这种，则需要配置
3. 配置的AppId不能用小程序的，只能用公众号的APPID
4. 先登录微信公众平台进入当前APPID的“公众号设置”的“功能设置”里填写“JS接口安全域名”。
5. 获取配置文件

#### 问题追踪
1. fail access denied 可能要申请是动态权限
2. TRTC设置样式高度

#### 配置问题
resolveAlias 可以配置导入路径映射
支持npm包导入问题
miniprogramRoot 小程序根目录