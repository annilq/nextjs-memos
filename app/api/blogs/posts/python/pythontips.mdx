---
title: python tips
date: 2023-10-26 13:44:01
tags: data model builders
---

### [利用yield创建数据库并返回，并利用垃圾回收机制调用finally子句关闭数据库连接](https://stackoverflow.com/questions/56062909/try-finally-in-python-3-generator)
```python
def get_db():
  db = SessionLocal()
  try:
    yield db
  finally:
    db.close()

```