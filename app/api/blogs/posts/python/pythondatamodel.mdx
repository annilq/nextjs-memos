---
title: python data model builders-collections.namedtuple,typing.NamedTuple,dataclasses.dataclass
date: 2023-10-20 13:51:01
tags: data model builders
---

### 当前普通Class的局限
1. __str__不清晰
2. .__eq__对比不准确
3. 实例的参数序列化需要调用.__dict__
4. 没设置默认值的类属性是不能访问的

### 三种创建数据类型的方式
#### collections.namedtuple
1. 可以指定默认值
2. 不支持类型注解
3. 返回值是tuple

#### typing.NamedTuple
1. 可以使用typing.NamedTuple()方法或者class继承方式定义
2. 实例属性必须使用类型注解(可以设置默认值)并且会生成同名类属性描述符（与默认类行为不一致，默认是不生成类属性的）
3. 类(没有注解)属性必须设置默认值
4. 返回值是tuple
5. 没有默认值的属性在初始化的时候一定要传参

#### dataclasses.dataclass
1. 使用装饰器定义
2. 实例属性必须使用类型注解(可以设置默认值)不会生成类属性描述符，不能通过类直接访问
3. 类(没有注解)属性必须设置默认值
4. 返回值是class可变
5. 没有默认值的属性在初始化的时候一定要传参
6. 可以通过定义default_factory方法来设置可变默认值已避免直接使用默认值被所有实例共享

>Python does not allow parameters without defaults after parameters
with defaults, therefore after you declare a field with a default value, all remaining
fields must also have default values.

